<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>FAQ/Solución de problemas</title>
	<link href="../css/style.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
</head>

<body>
	<div id="page">
		<div id="contentwrapper">
			<div id="sidebar_navigation" class="sidebar">
				<div class="left_sidebar_menu">
					<div class="left_sidebar_menu_button">
						<a href="index.html">Inicio</a>
					</div>
					<div class="left_sidebar_menu_button">
						<a href="documentation.html">Documentación</a>
					</div>
					<div class="left_sidebar_menu_button">
						<a href="download.html">Descargar</a>
					</div>
					<div class="left_sidebar_menu_selected">
						<a href="faq.html">FAQ</a>
					</div>
					<div class="left_sidebar_menu_button">
						<a href="https://github.com/NICMx/NAT64/issues" target="_blank">
							Reportar un Bug
						</a>
					</div>
					<div class="left_sidebar_menu_button">
						<a href="about.html">Acerca de ...</a>
					</div>
					<div class="left_sidebar_menu_button">
						<a href="contact.html">Contacto</a>
					</div>
				</div>
			</div>
			<div id="content">
				<div class="worklogo">
					<a href="index.html"><img src="../images/jool.png" alt="logo-jool" /></a>
				</div>
				<div class="workarea">
					<div class="content_text">

<p><a href="documentation.html">Documentación</a> &gt; <a href="documentation.html#miscellaneous">Otros</a> &gt; FAQ/Solución de problemas</p>

<h1 id="faqsolucin-de-problemas">FAQ/Solución de problemas</h1>

<p>Esto resume problemas en los cuales hemos visto que los usuarios se meten.</p>

<h2 id="instal-el-mdulo-de-jool-pero-no-parece-estar-haciendo-nada">Instalé el módulo de Jool pero no parece estar haciendo nada.</h2>

<p>Instalar el módulo del Jool sin argumentos suficientes es legal. Asumirá que intentas terminar de configurar utilizando la Aplicación de espacio de usuario, y se mantendra inactivo hasta que lo hayas hecho.</p>

<p>Utiliza el parámetro <a href="usr-flags-global.html#description"><code>--global</code></a> para saber el estado en el que se encuentra Jool:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>jool_siit --global
  Status: Disabled</code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>jool --global
  Status: Disabled</code></pre></div>

<p>Los requerimientos minimos de configuracion del SIIT de Jool son:</p>

<ul>
  <li>Un prefijo en el <a href="usr-flags-pool6.html">pool IPv6</a> <strong>o</strong> por lo menos un registro en la <a href="usr-flags-eamt.html">tabla EAM</a>.</li>
  <li>No debes de haberlo <a href="usr-flags-global.html#enable---disable">deshabilitado manualmente</a>.</li>
</ul>

<p>Los requerimientos minimos de configuración de Stateful Jool son:</p>

<ul>
  <li>Por lo menos un prefijo en el <a href="usr-flags-pool6.html">pool IPv6</a>.</li>
  <li>Por lo menosd un(a) prefijo/dirección en el <a href="usr-flags-pool4.html">pool IPv4</a>.</li>
  <li>No debes de haberlo <a href="usr-flags-global.html#enable---disable">deshabilitado manualmente</a>.</li>
</ul>

<p>Si ese no es el problema, intenta habilitar la depuración mientras compilas.</p>

<pre><code>user@node:~/Jool-&lt;version&gt;/mod$ make debug
</code></pre>

<p>Reinstalalo. Jool sera mas descriptivo en <code>dmesg</code>:</p>

<pre><code>$ dmesg | tail -5
[ 3465.639622] ===============================================
[ 3465.639655] Catching IPv4 packet: 192.0.2.16-&gt;198.51.100.8
[ 3465.639724] Translating the Packet.
[ 3465.639756] Address 192.0.2.16 lacks an EAMT entry and there's no pool6 prefix.
[ 3465.639806] Returning the packet to the kernel.
</code></pre>

<p>Si no esta imprimiendo nada a pesar de que estas habilitando la depuración, quizá es por que tu nivel de lo es muy alto. Ve <a href="http://elinux.org/Debugging_by_printing#Log_Levels">esto</a>.</p>

<p>Los mensajes de depuración se vuelven rápidamente gigabytes de log, asi que recuerda revertor esto antes de ponerlo en producción.</p>

<h2 id="que-hacer-con-este-mensaje-de-error-est-horriblemente-ambigo">Que hacer con este mensaje de error? Está horriblemente ambigüo.</h2>

<p>Así es, los mensajes de respuesta del modulo del kernel hacia el espacio de usuario son muy primitivos. Podriamos mejorar realmente la comunicación con la Aplicación de espacio de usuario, pero no tenemos control sobre la comunicación de <code>modprobe</code>.</p>

<p>De cualquier forma, tendras mejor suerte leyendo los logs de Jool. Como con cualquier otro componente del kernel, los mensajes de Jool estan mezclados junto con otros y se pueden ver ejecutando <code>dmesg</code> En general, la mayor parte de los kernels son muy silenciosos una vez que han terminado la fase de arranque, asi que el mensaje mas reciente de Jool deberia encontrarse hasta el final.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>sudo modprobe jool_siit <span class="nv">pool6</span><span class="o">=</span>2001:db8::/96 <span class="nv">pool4</span><span class="o">=</span>192.0a.2.0/24
ERROR: could not insert module jool_siit.ko: Invalid parameters
<span class="nv">$ </span>dmesg <span class="p">|</span> tail -1
<span class="o">[</span>28495.042365<span class="o">]</span> SIIT Jool ERROR <span class="o">(</span>parse_prefix4<span class="o">)</span>: IPv4 address or prefix is malformed:
192.0a.2.0/24.</code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>sudo jool --bib --add --tcp 2001:db8::1#2000 192.0.2.5#2000
TCP:
Invalid input data or parameter <span class="o">(</span>System error -7<span class="o">)</span>
<span class="nv">$ </span>dmesg <span class="p">|</span> tail -1
<span class="o">[</span>29982.832343<span class="o">]</span> NAT64 Jool ERROR <span class="o">(</span>add_static_route<span class="o">)</span>: The IPv4 address and port could not be
reserved from the pool. Maybe the IPv4 address you provided does not belong to the pool.
Or maybe they<span class="err">&#39;</span>re being used by some other BIB entry?</code></pre></div>

<h2 id="jool-es-intermitentemente-incapaz-de-traducir-trfico">Jool es intermitentemente incapaz de traducir tráfico.</h2>

<p>Ejecutaste algo como:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">ip addr flush dev eth1</code></pre></div>

<p>?</p>

<p>Entonces quizá hayas eliminado las <a href="http://es.wikipedia.org/wiki/Direcci%C3%B3n_de_Enlace-Local">direcciones de enlace</a> de la interfáz.</p>

<p>Las direcciónes de enlace son utilizadas por muchos portocolos IPv6 relevantes. En particular, son utilizadas por el <em>Protocolo de Descubrimiento de Vecinos</em>, lo que significa que si no las tienes, la máquina de traducción tendrá problemas para encontrar a sus vecinos IPv6.</p>

<p>Observa la salida de <code>ip addr</code>.</p>

<div class="highlight"><pre><code class="bash">user@T:~$ /sbin/ip address
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: <strong>eth0</strong>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:83:d9:40 brd ff:ff:ff:ff:ff:ff
    inet6 2001:db8:aaaa::1/64 <strong>scope global</strong> 
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe83:d940/64 <strong>scope link</strong> 
       valid_lft forever preferred_lft forever
3: <strong>eth1</strong>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:c6:01:48 brd ff:ff:ff:ff:ff:ff
    inet6 2001:db8:bbbb::1/64 <strong>scope global</strong> tentative 
       valid_lft forever preferred_lft forever
</code></pre></div>

<p>La primera interfaz está correctamente configurada; tiene ambas una dirección de “alcance global” (utilizada para un tráfico típico) y una direccion de “alcance de enlace”(utilizada para administración interna). La interfáz <em>eth1</em> carece de una dirección de enlace, y como resultado tiende a inducir dolores de cabeza.</p>

<p>La manera más facil de restaurar las “direcciones de “alcance de enlace”, que hemos encontrado, es reiniciar la interfaz:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">ip link <span class="nb">set </span>eth1 down
ip link <span class="nb">set </span>eth1 up</code></pre></div>

<p>Si, hablo encerio:</p>

<div class="highlight"><pre><code class="bash">user@T:~$ /sbin/ip address
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:83:d9:40 brd ff:ff:ff:ff:ff:ff
    inet6 2001:db8:aaaa::1/64 scope global 
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe83:d940/64 scope link 
       valid_lft forever preferred_lft forever
3: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:c6:01:48 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::a00:27ff:fec6:148/64 <strong>scope link</strong> 
       valid_lft forever preferred_lft forever
</code></pre></div>

<p>(Toma en cuenta que, necesitas agregar la dirección global de nuevo)</p>

<p>Tambien, como referencia futura, ten en mente que la manera “correcta” de vaciar una interfaz es</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">ip addr flush dev eth1 scope global</code></pre></div>

<p>IPv4 no necesita direcciones de enlace.</p>

<h2 id="el-rendimiento-es-terrible">El rendimiento es terrible!</h2>

<p><a href="offloading.html">deshabilita los offloads!</a></p>

<p>Si estas ejecutando Jool en una máquina virtual huesped, algo importante que debes mantener en mente es que quizá prefieras o tambien tengas que deshabilitar los offloads en el enlace ascendente de la <a href="http://en.wikipedia.org/wiki/Hypervisor">máquina virtual</a></p>

<h2 id="no-puedo-hacer-ping-a-la-direccin-ipv4-del-pool">No puedo hacer ping a la dirección IPv4 del pool.</h2>

<p>De hecho, esto es normal en Jool 3.2.x y versiones anteriores. La dirección de destino del paquete ping es traducible, asi que Jool se esta robando el paquete. Desafortunadamente, no tiene ningun registro relevante en el BIB (por que el ping no fue iniciado desde IPv6), asi que la traducción falla( y el paquete es desechado).</p>

<p>Dejando de lado este aspecto extraño, no causa ninguna otra catastrofe; solo haz ping a la dirección del nodo.</p>

<p>Jool 3.3+ maneja mejor esto asi que el ping deberia de ser exitoso.</p>


					</div>
				</div>
			</div>
			<div id="language_selector">
				
					<a href="../en/faq.html">en</a>
				
				|
				
					<span class="selected">es</span>
				
			</div>
			<div style="clear: both;">&nbsp;</div>
		</div>
	</div>

	<div id="footer">
		<div class="logo-tec"><a href="http://www.itesm.mx"><img src="../images/logo-tec.png" alt="logo-tec" /></a></div>
		<div class="logo-nic"><a href="http://www.nicmexico.mx/"><img src="../images/logo-nic.png" alt="logo-nic" /></a></div>
		<p class="legal">&copy;Jool 2015</p>
	</div>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-44741331-2', 'jool.mx');
	  ga('send', 'pageview');

	</script>
</body>
</html>
